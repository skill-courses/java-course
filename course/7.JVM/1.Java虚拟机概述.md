# Java虚拟机概述

![java-virtual-machine](https://tva1.sinaimg.cn/large/008eGmZEly1gpo8mmyyejj30nm0f1tam.jpg)

我们在开始学Java的第一章的第一节的时候，了解了JDK，JRE和JVM的基本概念，知道了他们三者的基本联系：

![JVM&JRE&JDK](http://ww1.sinaimg.cn/large/af4e9f79gy1fxmn7ms53dj20b1095dip.jpg)

那什么是JVM呢？什么是虚拟机呢？

JVM(Java Virtual Machine), 也就是Java虚拟机。所谓虚拟机，就是通过软件模拟的具有完整硬件系统功能的、运行在一个完全隔离环境中的计算机系统。JVM是通过软件来模拟Java字节码的指令集，是Java程序的运行环境。

Java虚拟机有自己完善的硬体架构，如处理器、堆栈、寄存器等，还具有相应的指令系统。Java虚拟机屏蔽了与具体操作系统平台相关的信息，使得Java程序只需生成在Java虚拟机上运行的目标代码（字节码），就可以在多种平台上不加修改地运行。

## JVM的主要功能

![working-of-jvm](https://tva1.sinaimg.cn/large/008eGmZEly1gpoavfrty1j30ht0c2n0h.jpg)

我们写的源代码`.java`文件，经过本地编译器，编译成为`.class`文件，此文件是Java字节码文件。Java字节码文件由JVM的类装载器加载到JVM里面，被同时加载到JVM里面的还包括这些字节码依赖的第三方Java类库；Java字节码文件和第三方类库被Java解释器和Java即时编译器处理之后，移交给Java运行期系统进行处理，并调用相关操作系统的接口完成相应的任务。

从上面的整个工作过程可以看出，JVM是Java语言能够在机器上面运行的关键组成部分，主要有以下几个重要功能：

* 通过ClassLoader寻找和装载class文件。
* 解释字节码成为指令并执行，提供class文件的运行环境。
* 进行运行期间的内存分配和垃圾回收。
* 提供与硬件交互的平台。

所以，虚拟机的价值主要有：

* **跨平台性**：Java 语言之所以有跨平台的优点，完全是 JVM 的功劳，跨平台性是 JVM 存在的最大的亮点。
* **优秀的垃圾回收机制**：Java 语言的诞生，极大的降低了软件开发人员的学习难度，除了 Java 面向对象编程的特性能够降低学习难度以外，还有一个比较重要的点，就是在进行 Java 编程的时候，可以更少的去考虑垃圾回收机制。

## 查看本地JVM

我们知道，如果需要运行 Java 程序，必须要安装 JDK，这说明 JDK 中就包含了支持 Java 语言运行的JVM ，我们来看下如何查看本机的 JVM 信息。

无论是 Windows 操作系统还是 Linux 操作系统，正确安装 JDK 并且配置好环境变量后，在命令行输入如下命令进行查看：

```bash
~ java -version
java version "15.0.2" 2021-01-19
Java(TM) SE Runtime Environment (build 15.0.2+7-27)
Java HotSpot(TM) 64-Bit Server VM (build 15.0.2+7-27, mixed mode, sharing)
```
仔细看看最后一句输出：`Java HotSpot(TM) 64-Bit Server VM (build 15.0.2+7-27, mixed mode, sharing)`, 表示的就是自己本地Java环境使用的JVM的名称，版本和型号。


