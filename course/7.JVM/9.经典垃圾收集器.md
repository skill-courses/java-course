# 经典垃圾收集器

![GC-popularity](https://i.loli.net/2021/05/04/nfwEucpDx63LT4G.png)

如果说垃圾收集算法是内存回收的方法论，那么垃圾收集器就是内存回收的实践者。

标题中使用”经典“二字是为了与几款目前仍处于试验状态，但执行效果上面有革命性改进的高性能低延迟收集器区分开来，这些经典的收集器尽管已经算不上是最先进的技术，但他们曾在实践中千锤百炼，足够成熟，基本上可以认为是现在到未来两三年内能够在商用生产环境上放心使用的全部垃圾收集器了。

## GC性能指标

不同的收集器由于使用了不同的收集算法，所以他们的性能也不一样。衡量一款垃圾收集器是否足够优异，主要以下衡量指标：

* **吞吐量：** `应用代码执行的时间`/`运行总时间`。其中`运行总时间` = `应用代码执行的时间` + `垃圾收集执行时间`。
* **GC负荷：** 与吞吐量相反，是`GC时间`/`运行总时间`。
* **暂停时间：** 就是发生STW的总时间。  
* **GC频率：** 就是GC在一个时间段发生的次数。
* **反应速度：** 就是从对象成为垃圾到被回收的时间。
* 交互式应用通常希望暂停时间越少越好。

需要说明的是，上面的指标仅仅是一种衡量方向，并不代表每个指标越快越好，需要根据时机的应用场景来衡量。

## 几款经典分代垃圾收集器

![Classic-Garbage-Collector](https://i.loli.net/2021/05/04/lK7xbHmeMOAwvZU.png)

上图展示了七种作用于不同分代的收集器，如果两个收集器之间存在连线，就说明他们之间可以搭配使用，收集器所处的区域，则表示它是属于新生代收集器还是老生代收集器。 接下来，我们将这些经典的收集器逐一介绍其目标，特性，原理和使用场景，深入了解它们的部分运作细节。

需要明白的是，虽然，我们会对各个收集器进行比较，但并非为了挑选一个最好的收集器出来，虽然垃圾收集器的技术在不断的进步，但直到现在还没有最好的收集器出现，就更不用说有”万能“的收集器出现了，所以我们选择的只是针对具体应用下的最合适的收集器。

